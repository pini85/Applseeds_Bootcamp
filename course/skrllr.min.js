'use strict';var _createClass=function(){function b(c,d){for(var f,e=0;e<d.length;e++)f=d[e],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}return function(c,d,e){return d&&b(c.prototype,d),e&&b(c,e),c}}();function _classCallCheck(b,c){if(!(b instanceof c))throw new TypeError('Cannot call a class as a function')}var Skrllr=function(){function b(c,d){_classCallCheck(this,b);this.settings=Object.assign({container:'section',easing:'ease',transitionTime:1e3,pagination:!0,menu:null,updateURL:!1,hashPrefix:'',beforeTransition:null,afterTransition:null},d),this.body=document.querySelector('body'),this.el=document.querySelector(c),this.sections=document.querySelectorAll(this.settings.container),this.total=this.sections.length,this.position=0,this.sleep=500,this.lastTransition=0,this.touchStartCoords={x:-1,y:-1},this.touchEndCoords={x:-1,y:1},this.direction=void 0,this.minDistanceXAxis=30,this.maxDistanceYAxis=30,this.maxAllowedTime=1e3,this.startTime=0,this.elapsedTime=0,this.el.classList.add('skrllr-wrapper'),this.addOrphanLinks(),this.addDataAttributes(),this.checkHash(),isMobile?(document.body.scrollTop=1,this.addTouchEventListeners()):this.addMouseEventListeners()}return _createClass(b,[{key:'addOrphanLinks',value:function addOrphanLinks(){var c=this.el.querySelectorAll('a[data-skrllr]'),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var e,f,d=c[Symbol.iterator]();!(_iteratorNormalCompletion=(e=d.next()).done);_iteratorNormalCompletion=!0)f=e.value,f.addEventListener('click',this.onPaginationClickHandler.bind(this),!1)}catch(g){_didIteratorError=!0,_iteratorError=g}finally{try{!_iteratorNormalCompletion&&d.return&&d.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:'addDataAttributes',value:function addDataAttributes(){for(var c=0;c<this.total;c++)if(this.sections[c].classList.add('skrllr-section'),this.sections[c].dataset.skrllr=this.settings.hashPrefix+(c+1),!0===this.settings.pagination){var d=this.settings.menu.querySelectorAll('li a');d[c].dataset.skrllr=this.settings.hashPrefix+(c+1),d[c].href='#'+this.settings.hashPrefix+(c+1),d[c].addEventListener('click',this.onPaginationClickHandler.bind(this),!1)}}},{key:'addMouseEventListeners',value:function addMouseEventListeners(){document.addEventListener('mousewheel',this.mouseWheelHandler.bind(this),!1),document.addEventListener('DOMMouseScroll',this.mouseWheelHandler.bind(this),!1),document.addEventListener('keydown',this.keyDownHandler.bind(this),!1)}},{key:'addTouchEventListeners',value:function addTouchEventListeners(){document.addEventListener('touchstart',this.swipeStart.bind(this),!1),document.addEventListener('touchmove',this.swipeMove.bind(this),!1),document.addEventListener('touchend',this.swipeEnd.bind(this),!1)}},{key:'checkHash',value:function checkHash(){if(''!==window.location.hash&&window.location.hash!=='#'+this.settings.hashPrefix+'1'){var c=window.location.hash.replace('#'+this.settings.hashPrefix,''),d=this.el.querySelector('[data-skrllr=\''+this.settings.hashPrefix+c+'\']:not(a)'),e=d.dataset.skrllr;if(e&&(d.classList.add('active'),!0===this.settings.pagination&&this.settings.menu.querySelector('a[data-skrllr=\''+this.settings.hashPrefix+c+'\']').classList.add('active'),history.replaceState&&!0===this.settings.updateURL)){var f=window.location.href.substr(0,window.location.href.indexOf('#')+'#'+this.settings.hashPrefix+c);history.pushState({},document.title,f)}this.position=-1*(100*(c-1)),this.animate(c,e,d)}else this.el.querySelector('[data-skrllr=\''+this.settings.hashPrefix+'1\']:not(a)').classList.add('active'),!0===this.settings.pagination&&this.settings.menu.querySelector('a[data-skrllr=\''+this.settings.hashPrefix+'1\']').classList.add('active')}},{key:'keyDownHandler',value:function keyDownHandler(c){switch(c.which){case 38:this.goUp();break;case 40:this.goDown();break;default:}}},{key:'onPaginationClickHandler',value:function onPaginationClickHandler(c){c.preventDefault();var d=parseInt(c.target.dataset.skrllr.replace(this.settings.hashPrefix,''));this.goTo(d)}},{key:'mouseWheelHandler',value:function mouseWheelHandler(c){c.preventDefault();var d=window.event||c,e=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));this.computeTransition(c,e)}},{key:'swipeStart',value:function swipeStart(c){c=c?c:window.event,c='changedTouches'in c?c.changedTouches[0]:c,this.touchStartCoords={x:c.pageX,y:c.pageY},this.startTime=new Date().getTime()}},{key:'swipeMove',value:function swipeMove(c){c=c?c:window.event,c.preventDefault()}},{key:'swipeEnd',value:function swipeEnd(c){if(c=c?c:window.event,c='changedTouches'in c?c.changedTouches[0]:c,this.touchEndCoords={x:c.pageX-this.touchStartCoords.x,y:c.pageY-this.touchStartCoords.y},this.elapsedTime=new Date().getTime()-this.startTime,this.elapsedTime<=this.maxAllowedTime&&Math.abs(this.touchEndCoords.y)>=this.minDistanceXAxis&&Math.abs(this.touchEndCoords.x)<=this.maxDistanceYAxis)switch(this.direction=0<this.touchEndCoords.y?'up':'down',this.direction){case'up':this.goUp();break;case'down':this.goDown();}}},{key:'computeTransition',value:function computeTransition(c,d){var f=new Date().getTime();return f-this.lastTransition<this.sleep+this.settings.transitionTime?(c.preventDefault(),!1):void(0>d?this.goDown():this.goUp(),this.lastTransition=f)}},{key:'goUp',value:function goUp(){var c=parseInt(this.el.querySelector('.active').dataset.skrllr.replace(this.settings.hashPrefix,'')),d=this.el.querySelector('[data-skrllr=\''+this.settings.hashPrefix+c+'\']:not(a)'),e=this.el.querySelector('[data-skrllr=\''+this.settings.hashPrefix+(parseInt(c)-1)+'\']:not(a)');if(e)this.position=-1*(100*(parseInt(e.dataset.skrllr.replace(this.settings.hashPrefix,''))-1));else return;var f=parseInt(e.dataset.skrllr.replace(this.settings.hashPrefix,''));if(d.classList.remove('active'),e.classList.add('active'),!0===this.settings.pagination&&(this.settings.menu.querySelector('.active').classList.remove('active'),this.settings.menu.querySelector('a[data-skrllr=\''+this.settings.hashPrefix+f+'\']').classList.add('active')),history.replaceState&&!0===this.settings.updateURL){var g=window.location.href.substr(0,window.location.href.indexOf('#'))+('#'+this.settings.hashPrefix+(c-1));history.pushState({},document.title,g)}this.animate(c,f,e)}},{key:'goDown',value:function goDown(){var c=parseInt(this.el.querySelector('.active').dataset.skrllr.replace(this.settings.hashPrefix,'')),d=this.el.querySelector('[data-skrllr=\''+this.settings.hashPrefix+c+'\']:not(a)'),e=this.el.querySelector('[data-skrllr=\''+this.settings.hashPrefix+(c+1)+'\']:not(a)');if(e)this.position=-1*(100*c);else return;var f=parseInt(e.dataset.skrllr.replace(this.settings.hashPrefix,''));if(d.classList.remove('active'),e.classList.add('active'),!0===this.settings.pagination&&(this.settings.menu.querySelector('.active').classList.remove('active'),this.settings.menu.querySelector('a[data-skrllr=\''+this.settings.hashPrefix+f+'\']').classList.add('active')),history.replaceState&&!0===this.settings.updateURL){var g=window.location.href.substr(0,window.location.href.indexOf('#'))+('#'+this.settings.hashPrefix+(c+1));history.pushState({},document.title,g)}this.animate(c,f,e)}},{key:'goTo',value:function goTo(c){var d=this.el.querySelector('.active'),e=this.el.querySelector('[data-skrllr=\''+this.settings.hashPrefix+c+'\']:not(a)');if(e){var f=parseInt(e.dataset.skrllr.replace(this.settings.hashPrefix,''));if(d.classList.remove('active'),e.classList.add('active'),!0===this.settings.pagination&&(this.settings.menu.querySelector('.active').classList.remove('active'),this.settings.menu.querySelector('a[data-skrllr=\''+this.settings.hashPrefix+c+'\']').classList.add('active')),this.position=-1*(100*(c-1)),history.replaceState&&!0===this.settings.updateURL){var g=window.location.href.substr(0,window.location.href.indexOf('#'))+('#'+this.settings.hashPrefix+c);history.pushState({},document.title,g)}this.animate(d.dataset.skrllr,f,e)}}},{key:'animate',value:function animate(c,d,e){var g=this;'function'==typeof this.settings.beforeTransition&&this.settings.beforeTransition(c,d,e);var f=function(h){if(h.preventDefault(),h.target.removeEventListener('transitionend',f),'function'==typeof g.settings.afterTransition)return g.settings.afterTransition(c,d,e)};this.el.addEventListener('transitionend',f,!1),this.el.style.cssText='transform: translate3d(0, '+this.position+'vh, 0);\n                             transition: transform '+this.settings.transitionTime+'ms '+this.settings.easing+';'}}]),b}(),isMobile=function(b){return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera);
